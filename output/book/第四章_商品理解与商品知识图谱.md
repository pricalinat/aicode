# 第四章：商品理解与商品知识图谱

## 4.1 引言

商品理解是供给理解在电子商务场景中的核心应用，旨在让机器能够深度解析商品的语义信息、属性特征和价值内涵。一个成熟的商品理解系统需要具备商品品类分类、属性解析、语义编码、质量评估等多方面的能力，为搜索、推荐、问答等下游任务提供高质量的商品知识支撑。本章将系统性地介绍商品理解的技术体系，包括商品品类体系、商品属性理解、商品语义编码、商品质量评估等核心内容，以及商品知识图谱的构建方法和应用场景。

商品理解的研究和实践在电商领域有着悠久的历史。从早期的基于关键词的搜索，到后来的基于向量检索的语义搜索，再到当前的基于大型语言模型的智能理解，商品理解的技术能力不断提升，应用场景也不断拓展。根据电商平台的运营实践，有效的商品理解能够显著提升用户的购物体验和平台的运营效率，是电商核心竞争力的重要组成部分。

## 4.2 商品品类体系

### 4.2.1 品类体系的设计原则

商品品类体系是商品知识组织的核心框架，决定了商品分类的粒度和结构。一个合理的品类体系需要满足以下原则：第一，**层次性**，品类之间应该有清晰的层级关系，如大类-中类-小类-细分类；第二，**完备性**，所有商品都应该能够归入某个品类；第三，**互斥性**，每个商品应该能够唯一地归入某个最细分类；第四，**可扩展性**，品类体系应该能够方便地添加新的品类以适应业务发展。

在实际应用中，不同电商平台的品类体系可能存在差异。综合电商平台通常采用多层级、细粒度的品类体系，如“手机通讯>手机>智能手机>5G手机”。垂直电商平台则可能采用更符合其业务特点的简化品类体系。品类体系的设计需要在分类精度和运营成本之间取得平衡。

### 4.2.2 商品分类技术

商品分类是将商品归入特定品类的技术过程，是商品理解的基础任务之一。商品分类的技术方法经历了从基于规则、基于统计机器学习到基于深度学习的发展历程。

早期的商品分类主要依赖人工设计的规则和关键词匹配。这种方法简单直接，但难以处理表达多样、边界模糊的商品。随着机器学习技术的发展，研究者开始采用朴素贝叶斯、SVM、决策树等算法进行商品分类，通过学习标注数据中的分类模式来预测商品的品类。这种方法相比规则方法具有更好的泛化能力，但仍受限于特征工程的质量。

深度学习方法的引入标志着商品分类进入了新时代。TextCNN、BERT等深度学习模型能够自动学习商品的文本表示，捕捉商品的深层语义信息，显著提升了分类的准确率。研究表明，基于BERT的商品分类模型在多个基准数据集上取得了最优效果，F1分数相比传统方法提升了5-10个百分点（Liu et al., 2021）。

在实际应用中，商品分类面临着类目结构复杂、标注数据不足、长尾类别处理等挑战。为了解决这些问题，研究者和工程师们提出了层级分类、多标签分类、零样本分类等技术方案。层级分类利用品类之间的层级关系进行约束，提升分类的准确性；多标签分类处理一个商品属于多个品类的情况；零样本分类借助语言模型的泛化能力处理从未见过的新品类。

### 4.2.3 品类知识图谱

品类知识图谱是品类体系的结构化表示，记录了品类之间的层级关系、兄弟关系、互斥关系等语义信息。品类知识图谱不仅服务于商品分类任务，还可以支持品类推荐、品类分析等下游应用。

品类知识图谱的构建包括品类实体识别、品类关系抽取、品类属性建模等环节。品类实体识别需要从商品标题、描述、搜索日志等文本中识别出提到的品类名称；品类关系抽取需要识别品类之间的层级关系（如父类-子类）、互斥关系（如同一层级的并列品类）、关联关系（如互补品类、替代品类）；品类属性建模需要定义品类的属性体系，如品类的关键词、典型用户、适用场景等。

## 4.3 商品属性理解

### 4.3.1 属性类型与结构

商品属性是描述商品特征和规格的信息，是商品理解的核心内容。商品属性可以分为以下几类：**基础属性**包括商品的名称、品牌、型号、产地等基本信息；**规格属性**包括商品的尺寸、重量、材质、颜色等规格参数；**功能属性**包括商品的功能特性、使用方法、注意事项等；**营销属性**包括商品的价格、促销、库存、销量等销售相关信息；**评价属性**包括商品的用户评分、评论内容、问答信息等反馈信息。

商品属性的结构可以分为**枚举属性**和**文本属性**两种类型。枚举属性的取值来自预定义的枚举值集合，如颜色的“红/蓝/白”、尺寸的“S/M/L/XL”等；文本属性的取值则是自由文本，如商品的详细描述、使用体验等。不同类型的属性需要采用不同的处理方法。

### 4.3.2 属性抽取技术

属性抽取是从商品文本中自动识别和提取属性信息的技术，是构建商品知识图谱的关键环节。属性抽取面临以下技术挑战：第一，**属性表达多样**，同一个属性可能有多种不同的表达方式，如“内存”也可能表达为“RAM”、“运行内存”；第二，**属性与值的关系复杂**，属性和属性值的表述顺序可能发生变化；第三，**属性嵌套和组合**，一个商品可能包含多个部件，每个部件有各自的属性。

基于序列标注的属性抽取方法是当前的主流方法。该方法将属性抽取转化为BIO标注问题，为文本中的每个词标注其是否属于某个属性或属性值。BERT-CRF模型是序列标注的经典架构，BERT负责学习上下文语义表示，CRF负责建模标签之间的转移关系。实验表明，BERT-CRF在商品属性抽取任务上取得了显著的效果提升。

基于问答的属性抽取是另一种有效的方法。该方法将属性抽取转化为问答问题，如“请问这款手机的内存是多少？”，通过预训练语言模型来回答这些问题，从而提取属性值。这种方法能够利用预训练语言模型的知识，具有较好的泛化能力。

### 4.3.3 属性值标准化

属性值标准化是将抽取出的属性值统一为标准格式的过程。由于表达方式的多样性，同一个属性值可能有多种不同的表述，如“8GB”、“8G”、“8gb”都表示相同的内存大小。属性值标准化对于知识图谱的质量至关重要。

属性值标准化可以采用基于规则的方法或基于机器学习的方法。基于规则的方法针对特定属性构建标准化映射表，将不同的表述映射到标准值；基于机器学习的方法则通过学习语义相似度来判断不同表述是否表示相同的值。近年来，基于语义嵌入的方法逐渐成为主流，能够处理规则方法难以覆盖的新表述。

## 4.4 商品语义编码

### 4.4.1 语义编码的重要性

语义编码是将商品的文本、图像等多模态信息转化为稠密向量表示的过程，是实现商品语义理解和匹配的技术基础。有效的语义编码需要捕捉商品的深层语义信息，使得语义相近的商品在向量空间中距离相近。

传统的文本编码方法包括TF-IDF、词袋模型等，这些方法基于词频统计，忽略了词的语义信息和上下文关系。深度学习方法通过预训练语言模型能够学习到更加丰富的语义表示，显著提升了商品语义编码的效果。

### 4.4.2 预训练语言模型在商品语义编码中的应用

预训练语言模型（如BERT、RoBERTa、ERNIE）通过在大规模文本语料上进行预训练，学习到了丰富的语言知识和世界知识。在商品语义编码中，预训练语言模型发挥着核心作用。

针对电商领域的特点，研究者和工程师们提出了多种电商预训练模型。这些模型在通用预训练模型的基础上，进一步在电商数据上进行领域自适应预训练，学习商品领域的专有知识和术语。例如，电商预训练模型可以学习到“iPhone 15”是一个具体的商品型号，“手机”是一个品类概念，“Apple”是品牌等知识。

微调是将预训练模型应用于商品理解下游任务的关键步骤。常见的微调方法包括在特定任务数据上进行全参数微调，以及采用参数高效微调方法（如LoRA、Adapter）进行部分参数更新。实践表明，领域自适应预训练加上任务微调的方法能够显著提升商品理解的效果。

### 4.4.3 商品向量表示

商品的语义向量表示是搜索、推荐等下游任务的基础。根据编码的信息类型，商品向量表示可以分为以下几种：

**文本向量**基于商品的标题、描述、评论等文本信息生成，能够捕捉商品的语义内容。文本向量的生成通常采用预训练语言模型的[CLS] token表示或句子级别的平均池化表示。

**视觉向量**基于商品的图片信息生成，能够捕捉商品的外观特征。视觉向量通常采用ResNet、EfficientNet等视觉模型提取，也可以采用CLIP等视觉-语言对齐模型生成与文本语义对齐的视觉表示。

**多模态融合向量**融合商品的文本和视觉信息，生成更加全面的商品表示。常见的多模态融合策略包括早期融合（将不同模态的特征拼接）、晚期融合（分别计算不同模态的向量后进行融合）、以及注意力融合（通过注意力机制动态融合不同模态的信息）。

## 4.5 商品质量评估

### 4.5.1 商品质量的多维特征

商品质量评估是商品理解的重要组成部分，涉及商品的信息完整性、内容准确性、描述一致性、价格合理性等多个维度。有效的商品质量评估能够帮助平台识别低质量商品，保护消费者权益，提升平台的整体商品品质。

**信息完整性**评估商品属性信息的完整程度，包括必填属性是否填写、选填属性是否丰富等。信息完整的商品能够为消费者提供充分的决策依据。

**内容准确性**评估商品描述是否与实际商品相符，是否存在夸大宣传、虚假宣传等问题。内容准确性是电商平台治理的重点关注领域。

**描述一致性**评估商品不同属性之间是否存在矛盾，如标题描述的品类与实际品类是否一致、价格与促销信息是否一致等。

**价格合理性**评估商品价格是否符合市场规律，是否存在价格虚高或价格欺诈等问题。

### 4.5.2 商品质量评估技术

商品质量评估的技术方法包括基于规则的方法和基于机器学习的方法。基于规则的方法通过预定义的规则判断商品是否符合质量标准，如必填属性是否为空、价格是否在合理范围内等。这种方法简单直接，但难以处理复杂的质量判断场景。

基于机器学习的方法通过学习标注数据中的质量模式来评估商品质量。常见的做法是将质量评估转化为分类问题或排序问题，使用深度学习模型预测商品的质量分数。BERT等预训练语言模型在商品质量评估任务上展现了良好的效果。

用户反馈信号是商品质量评估的重要依据。商品的销量、评分、好评率、退货率等指标能够反映商品的实际质量水平。通过分析用户评论的情感倾向，可以进一步细粒度地评估商品各个方面的质量。

## 4.6 商品知识图谱的构建与应用

### 4.6.1 商品知识图谱的整体架构

商品知识图谱的构建是一个系统工程，涉及数据采集、知识抽取、知识融合、知识存储等多个环节。其整体架构可以分为以下几个层次：

**数据层**负责从商品库、搜索引擎、用户行为系统等多个数据源采集商品相关数据。采集的数据类型包括商品基本信息、用户评论数据、问答数据、行为数据等。

**抽取层**负责从原始数据中抽取结构化的知识，包括实体抽取、关系抽取、属性抽取等环节。抽取层采用自然语言处理和计算机视觉技术，从文本和图像中提取商品实体、属性和关系。

**融合层**负责将抽取自不同来源的知识进行整合和消解，包括实体对齐、关系融合、冲突消解等任务。融合层的输出是统一、一致、高质量的知识图谱数据。

**应用层**负责基于知识图谱提供各种服务和应用，包括商品搜索、商品推荐、商品问答、商品治理等。

### 4.6.2 商品知识图谱的存储与查询

大规模商品知识图谱的存储和查询需要借助图数据库技术。常见的图数据库包括Neo4j、JanusGraph、TigerGraph、TuGraph等。这些图数据库支持高效的图存储和图查询，能够满足商品知识图谱的存储需求。

知识图谱的查询语言如SPARQL、Gremlin等提供了图遍历和图模式匹配的能力。例如，查询“iPhone 15的所有同类商品”可以通过遍历知识图谱中的“同类商品”关系来实现。

### 4.6.3 商品知识图谱的应用场景

商品知识图谱在电商领域有着丰富的应用场景。在**搜索**场景中，知识图谱可以提供实体链接、查询理解、结果解释等功能，帮助用户更快地找到目标商品。在**推荐**场景中，知识图谱可以建模商品之间的关系，提供基于知识增强的推荐，提升推荐的多样性和解释性。在**问答**场景中，知识图谱可以提供结构化的知识回答用户的商品相关问题。在**治理**场景中，知识图谱可以用于商品相似度计算、重复商品检测、低质量商品识别等任务。

研究表明，融合商品知识图谱的电商系统在多个指标上均优于传统方法。KGAT、KGIN等知识图谱注意力网络在推荐任务上取得了显著的效果提升，准确率相比baseline提升了10%以上。

## 4.7 本章小结

本章系统性地介绍了商品理解与商品知识图谱的技术体系。商品理解涵盖商品品类体系、商品属性理解、商品语义编码、商品质量评估等核心能力，是电商搜索、推荐等应用的技术基础。商品知识图谱通过结构化的方式组织商品知识，为供给理解提供了强大的知识支撑。在实际应用中，商品知识图谱的构建需要综合运用自然语言处理、知识图谱、机器学习等多领域的技术。

在后续章节中，本书将继续探讨小程序服务理解、服务知识图谱、双向匹配等技术内容，以及LLM评测方法、电商评测基准等评测体系相关内容。

## 本章回顾检查清单

- [ ] 商品品类体系的设计原则是否涵盖？
- [ ] 商品分类技术的发展历程是否完整？
- [ ] 商品属性理解的类型和方法是否全面？
- [ ] 商品语义编码的技术是否充分讨论？
- [ ] 商品质量评估的多维特征是否清晰？
- [ ] 是否引用了具体论文？
- [ ] 商品知识图谱的应用场景是否充分？
- [ ] 学术论文风格是否保持一致？
- [ ] 字数是否在3000-8000字范围内？
