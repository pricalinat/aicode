# 第三章：知识图谱与供给理解

## 3.1 引言

知识图谱（Knowledge Graph）作为表示和组织知识的核心技术，在供给理解中扮演着不可或缺的角色。知识图谱通过结构化的方式表示实体、概念及其关系，将分散的供给信息整合为互联互通的知识网络，为供给的深度理解和智能应用提供了坚实的数据基础。本章将系统性地介绍知识图谱的基本概念、构建方法、技术架构，以及知识图谱在供给理解中的应用场景和最新研究进展。

知识图谱的概念最早由Google在2012年提出，用于增强其搜索引擎的语义理解能力。此后，知识图谱技术在学术研究和工业应用中都取得了长足的发展。在供给理解领域，知识图谱被广泛用于商品知识图谱、服务知识图谱、用户知识图谱等的构建，为电商搜索、推荐系统、智能问答等应用场景提供了强大的知识支撑。研究表明，融合知识图谱的供给理解系统相比传统方法在准确性、可解释性和用户满意度方面均有显著提升（Wang et al., 2019）。

## 3.2 知识图谱的基本概念

### 3.2.1 图谱结构

知识图谱的核心结构由三元组（Triplet）构成，形式化为（头实体，关系，尾实体）或h(r,t)。其中，实体（Entity）表示客观世界中的具体事物或抽象概念，如“iPhone 15”、“手机”、“Apple”等；关系（Relation）表示实体之间的语义关联，如“属于”、“品牌是”、“类似”等；属性（Property）表示实体的特征信息，如商品的价格、颜色、尺寸等。

在供给理解的场景中，知识图谱通常包含以下几类实体：**商品实体**表示具体的商品或服务，如特定的商品SKU；**品类实体**表示商品的分类层级，如“手机”、“电子产品”、“数码设备”等；**品牌实体**表示商品的品牌，如“Apple”、“Samsung”等；**属性实体**表示商品的属性名和属性值，如“屏幕尺寸”、“6.7英寸”等；**用户实体**表示购买或浏览商品的用户；**场景实体**表示商品的使用场景或适用人群。不同类型的实体通过丰富的关系相互连接，形成一个结构化的知识网络。

### 3.2.2 Schema层与数据层

知识图谱在结构上分为Schema层和数据层。Schema层定义了知识图谱的元数据结构，包括实体类型、关系类型、属性定义等，相当于知识图谱的“类型系统”。例如，Schema层可以定义“商品”实体类型具有“品牌”、“价格”、“品类”等属性，“品牌”实体类型与“商品”实体类型之间存在“生产”关系。清晰定义的Schema层能够确保知识图谱的一致性和可扩展性。

数据层则存储具体的知识事实，以三元组的形式呈现。例如，（iPhone 15，品牌，Apple）、（iPhone 15、属于、手机）等。数据层的规模可以从数千个三元组到数十亿个三元组不等，取决于知识图谱的应用范围和数据来源。

## 3.3 知识图谱的构建方法

### 3.3.1 知识抽取

知识抽取（Knowledge Extraction）是知识图谱构建的核心环节，旨在从非结构化或半结构化数据中提取结构化的知识。知识抽取通常包括实体抽取、关系抽取和属性抽取三个主要任务。

**实体抽取**（Entity Extraction），也称为命名实体识别（Named Entity Recognition，NER），是从文本中识别出特定类型实体的任务。在供给理解中，实体抽取需要从商品标题、描述、用户评论等文本中识别出商品名称、品牌名、品类名、型号、颜色、材质等实体。近年来，基于BERT等预训练语言模型的实体抽取方法取得了显著进展，能够有效处理嵌套实体、歧义实体等复杂情况（Li et al., 2019）。

**关系抽取**（Relation Extraction）是从文本中识别实体之间语义关系的任务。例如，从“iPhone 15是Apple公司生产的手机”这句话中抽取 出（iPhone 15，生产商，Apple）这一关系三元组。关系抽取的方法包括基于规则的方法、基于监督学习的方法、远程监督方法等。远程监督方法通过将已有的知识图谱作为监督信号，从大量文本中自动学习关系抽取模型，大大降低了人工标注的成本。

**属性抽取**（Attribute Extraction）是从文本中抽取实体的属性信息。与关系抽取不同，属性抽取关注的是实体与其属性值之间的映射关系，如（iPhone 15，价格，7999元）。属性抽取可以转化为序列标注问题或问答问题来解决。

### 3.3.2 知识融合

知识融合（Knowledge Fusion）是将来自不同来源的知识进行整合和消歧的过程。由于数据来源的多样性，不同来源的知识可能存在冗余、冲突或不一致的情况，知识融合的目标就是解决这些问题，构建一个高质量、一致性的知识图谱。

**实体对齐**（Entity Alignment）是知识融合的核心技术，用于识别不同数据源中指向相同实体的记录。例如，“iPhone 15”、“苹果15手机”、“Apple iPhone 15”可能指向同一个实体。实体对齐的方法包括基于字符串相似度的方法、基于语义表示的方法、基于图神经网络的方法等。近年来，基于预训练语言模型的实体对齐方法取得了显著进展（Zhang et al., 2021）。

**冲突消解**（Conflict Resolution）是处理不同来源知识之间冲突的过程。例如，两个数据源可能给出同一商品不同的价格信息。冲突消解的策略包括基于置信度的方法、基于时间戳的方法、基于来源可靠性的方法等。

### 3.3.3 知识补全与推理

知识补全（Knowledge Completion）是指利用已有知识预测缺失知识的过程。知识图谱通常是不完整的，实体之间的大量关系并未被显式记录。知识补全技术通过学习已有的三元组模式，预测缺失的关系或属性。

**知识图谱嵌入**（Knowledge Graph Embedding）是知识补全的主流方法。其核心思想是将知识图谱中的实体和关系映射到低维向量空间，通过计算向量之间的相似度来预测缺失的知识。经典的嵌入模型包括TransE、TransR、DistMult、ComplEx等。TransE模型假设头实体向量加上关系向量等于尾实体向量，通过向量运算来学习关系的语义。后续的研究提出了更加复杂的多关系建模方法，如RotatE、pRotatE等，进一步提升了知识图谱嵌入的效果（Sun et al., 2019）。

**基于图神经网络的推理**是近年来兴起的方法。图神经网络（GNN）能够直接在知识图谱的结构上进行信息传播和推理，捕捉实体之间的高阶关系。R-GCN、CompGCN等模型将图神经网络应用于知识图谱的链接预测和实体分类任务，展现出了强大的推理能力。

## 3.4 商品知识图谱

### 3.4.1 商品知识图谱的定义与特点

商品知识图谱是知识图谱技术在电商领域的具体应用，专门用于表示和组织商品相关信息。商品知识图谱以商品为核心实体，整合商品的基本属性、销售信息、用户评价、关联商品等多维度信息，形成一个完整的商品知识网络。

商品知识图谱具有以下特点：第一，**规模庞大**。大型电商平台的商品知识图谱可能包含数十亿个实体和数百亿个三元组，需要分布式存储和计算技术的支持。第二，**动态性强**。商品信息（如价格、库存、评价）变化频繁，知识图谱需要支持实时或近实时的更新。第三，**多模态融合**。商品信息不仅包含文本，还包括图片、视频等多模态内容，知识图谱需要与多模态理解技术深度融合。第四，**业务相关性高**。商品知识图谱的构建紧密围绕电商业务需求，与商品分类、搜索、推荐等核心场景高度相关。

### 3.4.2 商品知识图谱的构建技术

商品知识图谱的构建涉及商品实体识别、属性抽取、品类体系构建、商品关系建模等多个技术环节。

**商品实体识别**需要从商品标题、描述等文本中识别出商品实体，并进行实体链接。商品实体识别的挑战在于商品名称的多样性和变体众多，同一个商品可能有多种不同的表述方式。研究表明，结合预训练语言模型和商品品类知识的实体识别方法能够有效提升识别的准确率。

**属性抽取**是商品知识图谱构建的关键环节。商品属性包括通用属性（如品牌、型号、价格）和品类特定属性（如手机的屏幕尺寸、摄像头的像素）。研究者们提出了基于序列标注的属性抽取方法、基于问答的属性抽取方法等，能够从非结构化的商品描述中自动抽取结构化的属性信息。

**品类体系构建**是商品知识图谱的Schema层设计。合理的品类体系需要具备层次清晰、粒度适当、覆盖全面的特点。研究者们利用机器学习方法从海量商品数据中自动学习品类体系，并通过人工审核和业务规则进行优化。

**商品关系建模**包括商品与商品之间的关系（如搭配、替代、互补）、商品与品牌的关系、商品与品类的关系等多种类型。通过建模这些关系，知识图谱能够支持商品推荐、商品比较、商品问答等高级应用。

### 3.4.3 商品知识图谱的应用

商品知识图谱在电商领域有着广泛的应用场景。在搜索场景中，知识图谱可以提供实体的语义信息，帮助理解用户的查询意图，实现更加精准的搜索结果排序。在推荐场景中，知识图谱可以建模商品之间的关联关系，提供更加多样化和可解释的推荐结果。在问答场景中，知识图谱可以提供结构化的知识回答用户关于商品的各种问题。在商品治理场景中，知识图谱可以用于商品相似度计算、异常商品检测等任务。

研究表明，融合商品知识图谱的推荐系统在推荐准确率、多样性和解释性方面均优于传统方法。Wang et al.（2019）提出的KGAT模型通过知识图谱注意力机制建模商品之间的高阶关系，显著提升了推荐效果。DKN模型将知识图谱嵌入与新闻标题的CNN表示进行融合，实现了基于知识的新闻推荐。

## 3.5 服务知识图谱

### 3.5.1 服务知识图谱的特点

服务知识图谱是知识图谱在小程序服务平台、本地生活服务平台等场景中的应用。与商品知识图谱相比，服务知识图谱具有以下独特特点：第一，**服务类型多样**。小程序平台上的服务种类繁多，包括出行、票务、餐饮、金融、健康等数十个大的服务类别，每个类别下又有众多细分服务。第二，**服务时效性强**。很多服务（如票务、外卖）具有很强的时间限制，服务知识图谱需要支持时效性信息的建模。第三，**服务质量重要**。服务的质量难以标准化评估，用户评价、口碑传播对于服务选择至关重要。第四，**服务场景复杂**。服务往往与特定的使用场景、用户群体相关联，知识图谱需要建模服务-场景-用户的多维关系。

### 3.5.2 服务知识图谱的构建

服务知识图谱的构建需要整合服务提供商的基础信息、服务的内容和功能描述、服务的定价和时效信息、服务的用户评价等多维度信息。

**服务实体识别**需要从小程序的名称、描述、功能列表等文本中识别出服务实体。与商品实体相比，服务实体更加抽象和多样化，识别的难度也更大。

**服务意图建模**是服务知识图谱特有的任务。用户的搜索往往隐含着服务意图，如“订电影票”对应票务服务，“打车”对应出行服务。服务知识图谱需要建立服务意图与具体服务之间的映射关系。

**服务质量评估**是服务知识图谱的重要组成部分。服务质量不仅包括服务本身的功能完备性，还包括服务的响应速度、用户满意度等指标。知识图谱可以通过整合用户评价、投诉数据、服务考核等多源信息，形成综合的服务质量评估。

## 3.6 知识图谱与供给理解的融合

### 3.6.1 知识增强的表示学习

知识图谱为供给理解提供了丰富的结构化知识，这些知识可以被用于增强深度学习模型的表示能力。一种常见的方法是将知识图谱嵌入作为额外特征融入到深度学习模型中。例如，在商品分类模型中，可以将商品的品类知识、品牌知识作为特征输入，帮助模型更好地理解商品的语义。

另一种方法是设计知识感知的预训练任务，在预训练阶段就引入知识图谱的结构化信息。ERNIE、KEPLER等模型通过在预训练中融入实体嵌入和关系嵌入，使语言模型学习到知识图谱中的结构化知识。

### 3.6.2 知识驱动的推理

知识图谱支持复杂的推理过程，这对于深度的供给理解至关重要。例如，当用户搜索“适合程序员使用的键盘”时，系统需要推理出程序员的工作特点（如长时间打字、对手感有要求）、键盘的品类（机械键盘）、关键属性（静音、手感好）等多层信息。知识图谱为这种多跳推理提供了结构化的知识支撑。

基于知识图谱的推理方法包括基于规则的方法、基于嵌入的方法、基于图神经网络的方法等。这些方法能够在知识图谱上进行信息传播和推理，回答关于供给的复杂查询。

### 3.6.3 知识图谱问答

知识图谱问答（KGQA）是知识图谱在供给理解中的重要应用。用户可以通过自然语言提问，如“iPhone 15的价格是多少”、“哪个品牌的手机性价比最高”等，系统从知识图谱中检索答案进行回答。

知识图谱问答的技术流程包括问题理解、知识检索、答案生成等环节。问题理解阶段需要解析用户的查询意图，识别出问题中涉及的实体和关系；知识检索阶段需要从知识图谱中检索相关的子图；答案生成阶段将检索到的知识组织为自然语言答案返回给用户。

## 3.7 本章小结

本章系统性地介绍了知识图谱与供给理解的关系。知识图谱通过结构化的方式表示实体、概念及其关系，为供给理解提供了坚实的数据基础。知识图谱的构建涉及知识抽取、知识融合、知识补全等核心技术，商品知识图谱和服务知识图谱是其在供给理解领域的典型应用。知识图谱与深度学习的融合为供给理解带来了知识增强的表示学习和知识驱动的推理等新能力。

在后续章节中，本书将继续深入探讨商品理解、服务理解的具体技术实现，以及双向匹配、评测体系等内容。

## 本章回顾检查清单

- [ ] 知识图谱基本概念是否清晰（Schema层、数据层、三元组）？
- [ ] 知识图谱构建方法是否全面（抽取、融合、补全）？
- [ ] 商品知识图谱和服务知识图谱的特点是否区分清晰？
- [ ] 是否引用了具体论文？
- [ ] 知识图谱与深度学习融合的方法是否讨论？
- [ ] 知识图谱在供给理解中的应用是否充分？
- [ ] 学术论文风格是否保持一致？
- [ ] 字数是否在3000-8000字范围内？
